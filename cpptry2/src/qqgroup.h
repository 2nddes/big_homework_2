#ifndef QQGROUP_H
#define QQGROUP_H

#include"group.h"
#include"qquser.h"

class qqGroupNodeLA :public groupNodeLA {
public:
	qqGroupNodeLA();
	qqGroupNodeLA(int qqGroupId, string qqGroupName, int qqGroupOwnerID, qqGroupNodeLA* next);
	virtual ~qqGroupNodeLA();

	int getGroupId()const override;
	string getGroupName()const override;

	bool isAdministrator(int userId)const;
	bool isMember(int userId)const;
	bool isOwner(int userId)const;

	bool isAllowJoin()const;
	bool isAllowSubgroup()const;
	bool isAllowSend()const;
	bool isAllowInvite()const;
	bool isAllowAdmins()const;

	void addMember(int userId)override;//添加成员//TODO
	void changeOwner(int userId)override;
	void removeMember(int userId)override;//注意是否为最后一人
	void setQQGroupId(int qqGroupId);
	void setQQGroupName(string qqGroupName);
	void addQQGroupAdmin(int userId);
	void removeQQGroupAdmin(int userId);
	void setQQGroupIsAllowJoin(bool isAllowJoin);
	void setQQGroupIsAllowSubgroup(bool isAllowSubgroup);
	void setQQGroupIsAllowSend(bool isAllowSend);
	void setQQGroupIsAllowInvite(bool isAllowInvite);
	void setQQGroupIsAllowAdmins(bool isAllowAdmins);

	int getQQGroupId()const;
	string getQQGroupName()const;
	vector<userInfo> getQQGroupMemberIDList()const;
	int getQQGroupOwnerID()const;
	vector<userInfo> getQQGroupAdminsIDList()const;
	int getQQGroupMemberCount()const;



	void setNext(qqGroupNodeLA* next);
	qqGroupNodeLA* getNext();
private:
	int m_qqGroupId = 0;//群ID,唯一标识
	string m_qqGroupName = "无";//群名
	vector<userInfo> m_qqGroupMemberIDList;//群成员信息列表
	int m_qqGroupOwnerID = 0;//群主ID
	vector<userInfo> m_qqGroupAdminsIDList;	//管理员信息列表

	static int m_qqGroupCount;//群总数
	qqGroupNodeLA* m_next = nullptr;

	friend class qqGroupListLA;
};

class qqGroupListLA {
public:
	qqGroupListLA();
	~qqGroupListLA();

	void saveGroupListData();
	void addGroup(qqGroupNodeLA* node);
	qqGroupNodeLA* addGroup(string qqGroupName, int qqGroupOwnerID);
	void removeGroup(qqGroupNodeLA* node);
	qqGroupNodeLA* findByGroupId(int qqGroupId);
	qqGroupNodeLA* getSentinel();

private:
	qqGroupNodeLA* m_sentinel;


};
#endif // !QQGROUP_H